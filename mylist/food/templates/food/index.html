{% extends "food/base.html" %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Food Index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    {% block body %}
    <form action="" method="GET" class="mb-4">
        <div class="input-group">
            <input type="search" name="food_name" value="{{ food_name }}"
                class="form-control bg-transparent border-white text-white" placeholder="Search for foods..."
                aria-label="Search" style="background-color: rgba(255, 255, 255, 0.1) !important;">
    
            <div class="input-group-append">
                <button class="btn btn-outline-light" type="submit">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </div>
        </form>
    <!-- <form action="" method="GET" class="mb-4">
        <div class="input-group">
            <input type="search" name="food_name" value="{{ food_name }}" class="form-control"
                placeholder="Search for foods..." aria-label="Search">
            <button class="btn btn-primary" type="submit">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
        </form> -->
    {% for item in item_list %}
    <div class="row food mx-auto text-center">
        <div class="col-md-3 offset-md-2">
            <img class="card pics" height="200px" src="{{item.item_image}}" />
        </div>
        <div class="col-md-4 ">
            <h3>{{item.item_name}}</h3>
            <h4>{{item.item_desc}}</h4>
            <h6>{{item.item_cal}} Cal</h6>
        </div>
        {%if user.is_authenticated %}
        <div class="col-md-2">
            <a href="{%url 'food:detail' item.id %}" class="btn btn-success">Details</a>
            {%if item in favourites.all%}
                <a href="{% url 'favourite_add' item.id %}" class="btn  btn-outline-primary">Remove</a>
            {%else%}
            <a href="{% url 'favourite_add' item.id %}" class="btn  btn-outline-primary">Add to Favourities</a>
                </div>
            {% endif %}
        {%endif%}
    </div>
    
    {% endfor %}


        <div class="mt-4 p-3 rounded" style="background: white; border: 2px solid #eee;">
            <div class="text-center">
                {% if item_list.has_previous %}
                <a href="?page=1{% if food_name %}&food_name={{food_name}}{% endif %}" class="btn btn-primary btn-sm mr-1">
                    First
                </a>
                <a href="?page={{item_list.previous_page_number}}{% if food_name %}&food_name={{food_name}}{% endif %}"
                    class="btn btn-primary btn-sm mr-1">
                    Previous
                </a>
                {% endif %}
        
                <span class="mx-3 fw-bold text-dark" style="font-size: 1.2rem;">
                    Page {{item_list.number}} of {{item_list.paginator.num_pages}}
                </span>
        
                {% if item_list.has_next %}
                <a href="?page={{item_list.next_page_number}}{% if food_name %}&food_name={{food_name}}{% endif %}"
                    class="btn btn-success ml-1" style="padding: 8px 20px;">
                    Next
                </a>
                <a href="?page={{item_list.paginator.num_pages}}{% if food_name %}&food_name={{food_name}}{% endif %}"
                    class="btn btn-warning ml-1" style="padding: 8px 20px;">
                    Last
                </a>
                {% endif %}
            </div>  </div>
    {% endblock %}
</body>
</html>